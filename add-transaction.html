<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>添加记录 - 轻记账</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/instagram-style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-md">
        <!-- 顶部导航 -->
        <div class="ins-card p-4 mb-6 flex items-center justify-between">
            <a href="javascript:history.back()" class="text-gray-600">
                <i class="fas fa-times"></i>
            </a>
            <h1 class="text-xl font-bold text-gray-800">添加记录</h1>
            <button id="saveBtn" class="text-blue-600 font-medium">
                保存
            </button>
        </div>

        <!-- 记账表单 -->
        <div class="ins-card p-6 mb-6">
            <!-- 类型选择 -->
            <div class="flex justify-center space-x-4 mb-6">
                <button class="btn-type-toggle active py-2 px-8 rounded-full font-medium text-green-500 income-text bg-gradient-to-r from-green-50 to-green-100 border border-green-200" data-type="income">
                    收入
                </button>
                <button class="btn-type-toggle py-2 px-8 rounded-full font-medium text-gray-500 bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200" data-type="expense">
                    支出
                </button>
            </div>

            <!-- 金额输入 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">金额</label>
                <div class="relative">
                    <span class="absolute left-4 top-3 text-xl font-bold text-gray-500">¥</span>
                    <input type="number" class="pl-10 pr-4 py-3 w-full text-xl font-bold text-gray-800 glassmorphism rounded-lg" placeholder="0.00" step="0.01">
                </div>
            </div>

            <!-- 分类选择 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">分类</label>
                <div class="relative">
                    <select class="w-full py-3 px-4 glassmorphism rounded-lg appearance-none">
                        <option value="" disabled selected>选择分类</option>
                        <optgroup label="收入" id="income-categories">
                            <option value="salary">工资</option>
                            <option value="bonus">奖金</option>
                            <option value="investment">投资</option>
                            <option value="parttime">兼职</option>
                            <option value="other-income">其他收入</option>
                        </optgroup>
                        <optgroup label="支出" id="expense-categories" style="display:none">
                            <option value="food">餐饮</option>
                            <option value="shopping">购物</option>
                            <option value="transport">交通</option>
                            <option value="entertainment">娱乐</option>
                            <option value="home">居家</option>
                            <option value="medical">医疗</option>
                            <option value="education">教育</option>
                            <option value="other-expense">其他</option>
                        </optgroup>
                    </select>
                    <div class="absolute right-4 top-3 pointer-events-none">
                        <i class="fas fa-chevron-down text-gray-400"></i>
                    </div>
                </div>
            </div>

            <!-- 日期选择 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">日期</label>
                <div class="relative">
                    <input type="date" class="w-full py-3 px-4 glassmorphism rounded-lg" value="2023-06-15">
                    <div class="absolute right-4 top-3 pointer-events-none">
                        <i class="fas fa-calendar text-gray-400"></i>
                    </div>
                </div>
            </div>

            <!-- 时间选择 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">时间</label>
                <div class="relative">
                    <input type="time" class="w-full py-3 px-4 glassmorphism rounded-lg" value="12:00">
                    <div class="absolute right-4 top-3 pointer-events-none">
                        <i class="fas fa-clock text-gray-400"></i>
                    </div>
                </div>
            </div>

            <!-- 备注 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">备注</label>
                <textarea class="w-full py-3 px-4 glassmorphism rounded-lg" rows="3" placeholder="添加备注..."></textarea>
            </div>
        </div>

        <!-- 快速金额选择 -->
        <div class="ins-card p-4 mb-6">
            <div class="grid grid-cols-4 gap-2">
                <button class="quick-amount py-2 text-center rounded-lg bg-gray-50 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">¥10</button>
                <button class="quick-amount py-2 text-center rounded-lg bg-gray-50 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">¥50</button>
                <button class="quick-amount py-2 text-center rounded-lg bg-gray-50 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">¥100</button>
                <button class="quick-amount py-2 text-center rounded-lg bg-gray-50 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">¥500</button>
            </div>
        </div>
    </div>

    <script src="./js/app.js"></script>
    <script src="./js/theme.js"></script>
    <script>
        // GSAP动画效果
        document.addEventListener('DOMContentLoaded', function() {
            // 顶部导航动画
            gsap.from('.ins-card:first-child', {duration: 0.6, y: -20, opacity: 0, ease: 'power3.out'});
            
            // 记账表单动画
            gsap.from('.ins-card:nth-child(2)', {duration: 0.6, scale: 0.95, opacity: 0, delay: 0.2, ease: 'power2.out'});
            
            // 类型切换按钮动画
            gsap.from('.btn-type-toggle', {duration: 0.5, scale: 0.9, opacity: 0, delay: 0.3, stagger: 0.1, ease: 'back.out(1.7)'});
            
            // 表单元素动画
            const formElements = document.querySelectorAll('input, select, textarea');
            formElements.forEach((element, index) => {
                gsap.from(element, {duration: 0.4, y: 15, opacity: 0, delay: 0.4 + (index * 0.1), ease: 'power2.out'});
            });
            
            // 快速金额选择动画
            gsap.from('.ins-card:nth-child(3)', {duration: 0.6, scale: 0.95, opacity: 0, delay: 0.5, ease: 'power2.out'});
            
            // 快速金额按钮动画
            const quickAmountBtns = document.querySelectorAll('.quick-amount');
            quickAmountBtns.forEach((btn, index) => {
                gsap.from(btn, {duration: 0.4, scale: 0.9, opacity: 0, delay: 0.6 + (index * 0.1), ease: 'back.out(1.7)'});
            });
            
            // 保存按钮动画效果
            gsap.from('#saveBtn', {duration: 0.6, scale: 0.8, opacity: 0, delay: 0.5, ease: 'elastic.out(1, 0.5)'});
            
            // 适配深色模式的表单样式
            function updateFormStyles() {
                const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
                const inputs = document.querySelectorAll('input, select, textarea');
                
                inputs.forEach(input => {
                    if (isDark) {
                        input.classList.add('ins-input');
                    } else {
                        input.classList.remove('ins-input');
                    }
                });
                
                // 更新类型切换按钮样式
                const incomeBtn = document.querySelector('[data-type="income"]');
                const expenseBtn = document.querySelector('[data-type="expense"]');
                
                if (isDark) {
                    if (incomeBtn.classList.contains('active')) {
                        incomeBtn.classList.remove('bg-green-50');
                        incomeBtn.classList.add('bg-opacity-20');
                        incomeBtn.classList.add('bg-green-900');
                    }
                    
                    if (expenseBtn.classList.contains('active')) {
                        expenseBtn.classList.remove('bg-red-50');
                        expenseBtn.classList.add('bg-opacity-20');
                        expenseBtn.classList.add('bg-red-900');
                    }
                } else {
                    if (incomeBtn.classList.contains('active')) {
                        incomeBtn.classList.remove('bg-opacity-20');
                        incomeBtn.classList.remove('bg-green-900');
                        incomeBtn.classList.add('bg-green-50');
                    }
                    
                    if (expenseBtn.classList.contains('active')) {
                        expenseBtn.classList.remove('bg-opacity-20');
                        expenseBtn.classList.remove('bg-red-900');
                        expenseBtn.classList.add('bg-red-50');
                    }
                }
                
                // 更新快速金额按钮样式
                const quickAmounts = document.querySelectorAll('.quick-amount');
                quickAmounts.forEach(btn => {
                    if (isDark) {
                        btn.classList.remove('bg-gray-50');
                        btn.classList.add('bg-gray-800');
                        btn.classList.remove('hover:bg-blue-50');
                        btn.classList.add('hover:bg-blue-900');
                    } else {
                        btn.classList.remove('bg-gray-800');
                        btn.classList.add('bg-gray-50');
                        btn.classList.remove('hover:bg-blue-900');
                        btn.classList.add('hover:bg-blue-50');
                    }
                });
            }
            
            // 监听主题变化
            const themeToggle = document.querySelector('.theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    setTimeout(updateFormStyles, 100);
                });
            }
            
            // 初始化时设置表单样式
            setTimeout(updateFormStyles, 100);
            
            // 修改类型切换逻辑，适配Instagram风格
            document.querySelectorAll('.btn-type-toggle').forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有按钮的active样式
                    document.querySelectorAll('.btn-type-toggle').forEach(b => {
                        b.classList.remove('active');
                        b.classList.remove('text-green-500', 'income-text', 'bg-gradient-to-r', 'from-green-50', 'to-green-100', 'border-green-200');
                        b.classList.remove('text-red-500', 'expense-text', 'bg-gradient-to-r', 'from-red-50', 'to-red-100', 'border-red-200');
                        b.classList.add('text-gray-500', 'bg-gradient-to-r', 'from-gray-50', 'to-gray-100', 'border-gray-200');
                    });
                    
                    // 为当前点击的按钮添加active样式
                    this.classList.add('active');
                    this.classList.remove('text-gray-500');
                    
                    // 根据类型设置不同的颜色
                    if (this.dataset.type === 'income') {
                        this.classList.add('text-green-500', 'income-text', 'bg-gradient-to-r', 'from-green-50', 'to-green-100', 'border-green-200');
                        document.getElementById('income-categories').style.display = 'block';
                        document.getElementById('expense-categories').style.display = 'none';
                    } else {
                        this.classList.add('text-red-500', 'expense-text', 'bg-gradient-to-r', 'from-red-50', 'to-red-100', 'border-red-200');
                        document.getElementById('income-categories').style.display = 'none';
                        document.getElementById('expense-categories').style.display = 'block';
                    }
                    
                    // 适配深色模式
                    updateFormStyles();
                });
            });
        });
    </script>
    <script>
        // 类型切换
        document.querySelectorAll('.btn-type-toggle').forEach(btn => {
            btn.addEventListener('click', function() {
                // 移除所有按钮的active样式
                document.querySelectorAll('.btn-type-toggle').forEach(b => {
                    b.classList.remove('active');
                    b.classList.remove('text-green-500', 'bg-green-50', 'border-green-200');
                    b.classList.remove('text-red-500', 'bg-red-50', 'border-red-200');
                    b.classList.add('text-gray-500', 'bg-gray-50', 'border-gray-200');
                });
                
                // 为当前点击的按钮添加active样式
                this.classList.add('active');
                this.classList.remove('text-gray-500', 'bg-gray-50', 'border-gray-200');
                
                // 根据类型设置不同的颜色
                if (this.dataset.type === 'income') {
                    this.classList.add('text-green-500', 'bg-green-50', 'border-green-200');
                    document.getElementById('income-categories').style.display = 'block';
                    document.getElementById('expense-categories').style.display = 'none';
                } else {
                    this.classList.add('text-red-500', 'bg-red-50', 'border-red-200');
                    document.getElementById('income-categories').style.display = 'none';
                    document.getElementById('expense-categories').style.display = 'block';
                }
            });
        });

        // 快速金额选择
        document.querySelectorAll('.quick-amount').forEach(btn => {
            btn.addEventListener('click', function() {
                const amount = this.textContent.replace('¥', '');
                document.querySelector('input[type="number"]').value = amount;
            });
        });

        // 保存按钮
        document.getElementById('saveBtn').addEventListener('click', function() {
            // 这里可以添加表单验证和数据保存逻辑
            alert('记录已保存！');
            window.location.href = './transactions.html';
        });
    </script>
</body>
</html>